Создать текстовый файл с записями, включающие имя/фамилию человека, год рождения, пол и рост (в метрах). 
Упорядочить элементы по году рождения, имени/фамилии, полу или росту. 
Вывести результат. 
Указать элемент, по которому следует упорядочить, через консоль. 
А также реализовать возможность задавать несколько полей для упорядочивания.


Некорректный код:


#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_LEN 50

typedef struct {
    char name[MAX_LEN];
    char surname[MAX_LEN];
    int birth_year;
    char gender;
    double height;
} Person;

int compare_person(const void *a, const void *b) {
    return strcmp(((Person*)a)->name, ((Person*)b)->name);
}

void sort_people(Person *people, int num_people, int (*compare)(const void *, const void *)) {
    qsort(people, num_people, sizeof(Person), compare);
}

void print_people(Person *people, int num_people) {
    for (int i = 0; i < num_people; i++) {
        printf("%s %s, %d, %c, %.2f m\n", people[i].name, people[i].surname, people[i].birth_year, people[i].gender, people[i].height);
    }
}

int main() {
    FILE *file;
    char filename[MAX_LEN];
    int num_people;

    printf("Введите имя файла для записи данных: ");
    scanf("%s", filename);

    file = fopen(filename, "w");
    if (file == NULL) {
        printf("Ошибка открытия файла.\n");
        return 1;
    }

    printf("Введите количество записей: ");
    scanf("%d", &num_people);

    Person *people = (Person *)malloc(num_people * sizeof(Person));

    for (int i = 0; i < num_people; i++) {
        printf("Введите имя: ");
        scanf("%s", people[i].name);
        printf("Введите фамилию: ");
        scanf("%s", people[i].surname);
        printf("Введите год рождения: ");
        scanf("%d", &people[i].birth_year);
        printf("Введите пол (M/F): ");
        scanf(" %c", &people[i].gender);
        printf("Введите рост в метрах: ");
        scanf("%lf", &people[i].height);

        fprintf(file, "%s %s %d %c %.2f\n", people[i].name, people[i].surname, people[i].birth_year, people[i].gender, people[i].height);
    }

    fclose(file);

    int choice;
    printf("Выберите поле для сортировки:\n");
    printf("1 - Имя\n");
    printf("2 - Фамилия\n");
    printf("3 - Год рождения\n");
    printf("4 - Пол\n");
    printf("5 - Рост\n");
    scanf("%d", &choice);

    switch (choice) {
        case 1:
            sort_people(people, num_people, compare_person);
            break;
        // Добавьте другие кейсы для других полей сортировки
        default:
            printf("Некорректный выбор.\n");
            break;
    }

    printf("Результат сортировки:\n");
    print_people(people, num_people);

    free(people);

    return 0;
}
